<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Order Online</title>
    <link rel="stylesheet" href="css/style.css?v=2.0">
</head>
<body>
    <div class="container">
        <h1>Pre-Order Makanan</h1>
        
        <form action="proses.php" method="POST" onsubmit="return validateForm()">
            
            <!-- Daftar Produk (dengan dropdown jumlah) -->
            <h3>Pilih Pesanan:</h3>
            <?php foreach ($produk_list as $produk): ?>
            <div class="produk">
                <div class="produk-info">
                    <div class="produk-nama"><?= htmlspecialchars($produk['nama']) ?></div>
                    <div class="produk-harga">Rp <?= number_format($produk['harga'], 0, ',', '.') ?></div>
                    <?php if (!empty($produk['deskripsi'])): ?>
                        <div class="produk-deskripsi"><?= htmlspecialchars($produk['deskripsi']) ?></div>
                    <?php endif; ?>
                </div>
                <div>
                    <select name="produk[<?= $produk['id'] ?>]" class="produk-qty">
                        <option value="0">0</option>
                        <?php for ($i = 1; $i <= 10; $i++): ?>
                            <option value="<?= $i ?>"><?= $i ?></option>
                        <?php endfor; ?>
                    </select>
                </div>
            </div>
            <?php endforeach; ?>
            
            <!-- Catatan Pesanan -->
            <div class="form-group">
                <label for="catatan">Catatan Pesanan:</label>
                <textarea name="catatan" id="catatan" placeholder="Contoh: Tidak pakai MSG, potong 8, level pedas 3..."></textarea>
                <div class="catatan-kecil">Opsional: tulis instruksi khusus untuk pesananmu</div>
            </div>
            
            <!-- Data Pelanggan -->
            <h3>Data Diri:</h3>
            
            <div class="form-group">
                <label for="nama">Nama Lengkap <span style="color:red">*</span></label>
                <input type="text" name="nama" id="nama" required placeholder="Masukkan nama lengkap">
            </div>
            
            <div class="form-group">
                <label for="telepon">No. Telepon/WA <span style="color:red">*</span></label>
                <input type="tel" name="telepon" id="telepon" required placeholder="081234567890">
            </div>
            
            <div class="form-group">
                <label for="alamat">Alamat Lengkap <span style="color:red">*</span></label>
                <textarea name="alamat" id="alamat" required placeholder="Jalan, nomor rumah, kecamatan, kota, kode pos"></textarea>
            </div>
            
            <!-- Tombol Submit -->
            <button type="submit">Pre-Order Sekarang!</button>
        </form>
    </div>
    
    <script>
    // JavaScript MINIMAL hanya untuk validasi form sebelum submit
    function validateForm() {
        // Cek apakah setidaknya ada 1 produk yang dipilih (qty > 0)
        const selects = document.querySelectorAll('select[name^="produk"]');
        let adaProduk = false;
        
        for (let select of selects) {
            if (parseInt(select.value) > 0) {
                adaProduk = true;
                break;
            }
        }
        
        if (!adaProduk) {
            alert('Mohon pilih minimal 1 produk!');
            return false;
        }
        
        return true;
    }
    </script>
</body>
</html>